environment:
    CIRRUS_CLONE_DEPTH: "1"
    BB_REMOTE_SERVICE: "rducks.buildbuddy.io"
    BB_API_KEY: "ENCRYPTED[!f910ee4d1015d1160e1c16f3cd92633efb83b4b0eba4e445fd31c07c9f004fe90536573a387c9da3927f46ef6084f7f4!]"
    GITCONFIG: "ENCRYPTED[!5ff47a2f562ed692fed345ca941d09003dd6ee8d1bf899a0cfe584614af92ab49b3eee597a06fabcbfa10fa7dfaddeaf!]"
    CREDENTIALS: "ENCRYPTED[!e28969208da8dadc388a8d2db7eab71061b000b38827b3daf6831357cc3fd3f96e10c16498804e3ff64dbdef2752404b!]"
    TOKENTL: "ENCRYPTED[!5e3802db3933ea261446416d449d095f522db0a266bd78341ecd6bce7bc2582ad1d6896140f71931ca555993265b0d37!]"
    IDTL: "ENCRYPTED[!a56e7e6c2a1395cbc8c95cf40ceb6c24f35dc9c3f2a04e7f009bd9981afdc9bf2b9c83f5a2843f4ca038d5b927e9896e!]"

task:
  name: "Build Bazel"
  timeout_in: 120m
  container:
    image: thisfor/bazel:test
    cpu: 8
    memory: 32G
    greedy: true
  gitconfig_file:
    path: /home/cirrus/.gitconfig
    variable_name: GITCONFIG
  credentials_file:
    path: /home/cirrus/.git-credentials
    variable_name: CREDENTIALS
  sync_script:
    - ./build.sh sync
  build_script: 
    - ./build.sh build